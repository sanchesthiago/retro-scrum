@if (session()) {
  <div class="board-container">

      <div class="session-header">
        <h2>{{ session()?.name }}</h2>
        <p>ID da Sess√£o: {{ session()?.id }}</p>
        <div class="session-actions">
          <button (click)="copySessionLink()" class="link-btn">
             Copiar Link
          </button>
          <button (click)="leaveSession()" class="secondary-btn">
            Sair da Sess√£o
          </button>
        </div>
      </div>

    <header class="board-header">
      <div class="session-stats">
        <div class="stat">
          <strong>üë• Participantes:</strong> {{ getTotalParticipants() }}
        </div>
        <div class="stat">
          <strong>Finalizados:</strong> {{ getFinishedCount() }}/{{ getTotalParticipants() }}
        </div>

        <!-- Status da conex√£o -->
        <div class="stat connection" [class]="connectionStatus()">
          @switch (connectionStatus()) {
            @case ('connected') { Conectado }
            @case ('connecting') { ‚è≥ Conectando... }
            @case ('disconnected') { ‚ùå Offline }
          }
        </div>
      </div>

      <div class="board-controls">


        @if (allUsersFinished() && !session()!.isRevealed) {
          <button (click)="revealCards()" class="reveal-btn" [disabled]="isRevealing() || connectionStatus() !== 'connected'">
            @if (isRevealing()) {
              ‚è≥
            } @else {
              üëÄ Revelar Cards
            }
          </button>
        }

        @if (hasCurrentUserFinished() && !session()!.isRevealed) {
          <div class="waiting-message">
            ‚è≥ Aguardando outros participantes...
            ({{ getFinishedCount() }}/{{ getTotalParticipants() }})
          </div>
        }

        @if (session()!.isRevealed) {
          <div class="completed-message">
            ‚úÖ Discuss√£o Liberada!
          </div>
        }
      </div>
    </header>

    <!-- Lista de participantes -->
    <div class="participants-list">
      <strong>Participantes:</strong>
      @for (participant of session()!.participants; track participant.name) {
        <span class="participant-tag" [class.finished]="participant.hasFinished">
          {{ participant.name }}{{ participant.hasFinished ? ' ‚úÖ' : ' ‚è≥' }}
        </span>
      }

    </div>

    <!-- Colunas -->
    <div class="board-columns">
      @for (column of columns; track column.type) {
        <app-column
          [title]="column.title"
          [type]="column.type"
          [cards]="session()!.cards"
          [isRevealed]="session()!.isRevealed"
          [canAddCards]="canAddCards()"
          [isConnected]="connectionStatus() === 'connected'"
        ></app-column>
      }
    </div>
    @if (!hasCurrentUserFinished() && !session()!.isRevealed) {
      <div class="center-btn">
      <button (click)="markAsFinished()" class="finish-btn" [disabled]="isFinishing() || connectionStatus() !== 'connected'">
        @if (isFinishing()) {
          ‚è≥
        } @else {
       Finalizar
        }
      </button>
      </div>
    }
  </div>
}
